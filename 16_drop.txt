/* Drop Triggers, Sequences for Autonumber Columns */

DECLARE 
  C NUMBER; 
BEGIN 
SELECT COUNT(*) INTO C 
FROM ALL_TRIGGERS 
  WHERE TRIGGER_NAME = 'TRG_ADRESA_ADRESA_ID'; 
  IF (C > 0) THEN 
    EXECUTE IMMEDIATE 'DROP TRIGGER TRG_ADRESA_ADRESA_ID'; 
END IF; 
END; 

/

DECLARE 
  C NUMBER; 
BEGIN 
SELECT COUNT(*) INTO C 
FROM ALL_SEQUENCES 
  WHERE SEQUENCE_NAME = 'SEQ_ADRESA_ADRESA_ID'; 
  IF (C > 0) THEN 
    EXECUTE IMMEDIATE 'DROP SEQUENCE SEQ_ADRESA_ADRESA_ID'; 
END IF; 
END; 

/

DECLARE 
  C NUMBER; 
BEGIN 
SELECT COUNT(*) INTO C 
FROM ALL_TRIGGERS 
  WHERE TRIGGER_NAME = 'TRG_DOKTOR_DOKTOR_ID'; 
  IF (C > 0) THEN 
    EXECUTE IMMEDIATE 'DROP TRIGGER TRG_DOKTOR_DOKTOR_ID'; 
END IF; 
END; 

/

DECLARE 
  C NUMBER; 
BEGIN 
SELECT COUNT(*) INTO C 
FROM ALL_SEQUENCES 
  WHERE SEQUENCE_NAME = 'SEQ_DOKTOR_DOKTOR_ID'; 
  IF (C > 0) THEN 
    EXECUTE IMMEDIATE 'DROP SEQUENCE SEQ_DOKTOR_DOKTOR_ID'; 
END IF; 
END; 

/

DECLARE 
  C NUMBER; 
BEGIN 
SELECT COUNT(*) INTO C 
FROM ALL_TRIGGERS 
  WHERE TRIGGER_NAME = 'TRG_PACIENT_PACIENT_ID'; 
  IF (C > 0) THEN 
    EXECUTE IMMEDIATE 'DROP TRIGGER TRG_PACIENT_PACIENT_ID'; 
END IF; 
END; 

/

DECLARE 
  C NUMBER; 
BEGIN 
SELECT COUNT(*) INTO C 
FROM ALL_SEQUENCES 
  WHERE SEQUENCE_NAME = 'SEQ_PACIENT_PACIENT_ID'; 
  IF (C > 0) THEN 
    EXECUTE IMMEDIATE 'DROP SEQUENCE SEQ_PACIENT_PACIENT_ID'; 
END IF; 
END; 

/

DECLARE 
  C NUMBER; 
BEGIN 
SELECT COUNT(*) INTO C 
FROM ALL_TRIGGERS 
  WHERE TRIGGER_NAME = 'TRG_SPECIAL_SPECIALIZACE_ID'; 
  IF (C > 0) THEN 
    EXECUTE IMMEDIATE 'DROP TRIGGER TRG_SPECIAL_SPECIALIZACE_ID'; 
END IF; 
END; 

/

DECLARE 
  C NUMBER; 
BEGIN 
SELECT COUNT(*) INTO C 
FROM ALL_SEQUENCES 
  WHERE SEQUENCE_NAME = 'SEQ_SPECIAL_SPECIALIZACE_ID'; 
  IF (C > 0) THEN 
    EXECUTE IMMEDIATE 'DROP SEQUENCE SEQ_SPECIAL_SPECIALIZACE_ID'; 
END IF; 
END; 

/

DECLARE 
  C NUMBER; 
BEGIN 
SELECT COUNT(*) INTO C 
FROM ALL_TRIGGERS 
  WHERE TRIGGER_NAME = 'TRG_VYSETRENI_VYSETRENI_ID'; 
  IF (C > 0) THEN 
    EXECUTE IMMEDIATE 'DROP TRIGGER TRG_VYSETRENI_VYSETRENI_ID'; 
END IF; 
END; 

/

DECLARE 
  C NUMBER; 
BEGIN 
SELECT COUNT(*) INTO C 
FROM ALL_SEQUENCES 
  WHERE SEQUENCE_NAME = 'SEQ_VYSETRENI_VYSETRENI_ID'; 
  IF (C > 0) THEN 
    EXECUTE IMMEDIATE 'DROP SEQUENCE SEQ_VYSETRENI_VYSETRENI_ID'; 
END IF; 
END; 

/

/* Drop Tables */

begin
	EXECUTE IMMEDIATE 'DROP TABLE   Adresa CASCADE CONSTRAINTS';
	EXCEPTION WHEN OTHERS THEN NULL;
end;  
/

begin
	EXECUTE IMMEDIATE 'DROP TABLE   Doktor CASCADE CONSTRAINTS';
	EXCEPTION WHEN OTHERS THEN NULL;
end;  
/

begin
	EXECUTE IMMEDIATE 'DROP TABLE   Pacient CASCADE CONSTRAINTS';
	EXCEPTION WHEN OTHERS THEN NULL;
end;  
/

begin
	EXECUTE IMMEDIATE 'DROP TABLE   Specializace CASCADE CONSTRAINTS';
	EXCEPTION WHEN OTHERS THEN NULL;
end;  
/

begin
	EXECUTE IMMEDIATE 'DROP TABLE   Vysetreni CASCADE CONSTRAINTS';
	EXCEPTION WHEN OTHERS THEN NULL;
end;  
/
drop procedure prcd_pridani_vysetreni;
drop package nemocnice_api;

drop table obj_adresa;
drop table obj_doktor;
drop table obj_pacient;
drop table obj_specializace;
drop table obj_vysetreni;

drop type T_vysetreni force;
drop type T_Pacient force;
drop type T_doktor force;
drop type T_adresa force;
drop type T_specializace force;
drop trigger trg_pridani_pacienta;